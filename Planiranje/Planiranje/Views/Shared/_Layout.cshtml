<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<title>@Page.Title</title>
	<meta content="width=device-width, initial-scale=1.0" name="viewport" />
	<meta content="" name="description" />
	<meta content="" name="author" />
	<link rel="stylesheet" href="~/assets/plugins/bootstrap/css/bootstrap.css" />
	<link rel="stylesheet" href="~/assets/css/main.css" />
	<link rel="stylesheet" href="~/assets/css/theme.css" />
	<link rel="stylesheet" href="~/assets/css/MoneAdmin.css" />
	<link rel="stylesheet" href="~/assets/plugins/Font-Awesome/css/font-awesome.css" />
	<link rel="stylesheet" href="~/assets/plugins/dataTables/dataTables.bootstrap.css" />
	<link rel="stylesheet" href="~/Content/Custom.css" />
	<script src="~/assets/plugins/jquery-2.0.3.min.js"></script>
	<script src="~/assets/plugins/bootstrap/js/bootstrap.min.js"></script>
	<script src="~/assets/plugins/modernizr-2.6.2-respond-1.1.0.min.js"></script>
    <style>
        .lds-roller {
  display: inline-block;
  position: fixed;
  width: 64px;
  height: 64px;
  left: 50%;
  bottom: 50%;
}
.lds-roller div {
  animation: lds-roller 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
  transform-origin: 32px 32px;
}
.lds-roller div:after {
  content: " ";
  display: block;
  position: absolute;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: #b300b3;
  margin: -3px 0 0 -3px;
}
.lds-roller div:nth-child(1) {
  animation-delay: -0.036s;
}
.lds-roller div:nth-child(1):after {
  top: 50px;
  left: 50px;
}
.lds-roller div:nth-child(2) {
  animation-delay: -0.072s;
}
.lds-roller div:nth-child(2):after {
  top: 54px;
  left: 45px;
}
.lds-roller div:nth-child(3) {
  animation-delay: -0.108s;
}
.lds-roller div:nth-child(3):after {
  top: 57px;
  left: 39px;
}
.lds-roller div:nth-child(4) {
  animation-delay: -0.144s;
}
.lds-roller div:nth-child(4):after {
  top: 58px;
  left: 32px;
}
.lds-roller div:nth-child(5) {
  animation-delay: -0.18s;
}
.lds-roller div:nth-child(5):after {
  top: 57px;
  left: 25px;
}
.lds-roller div:nth-child(6) {
  animation-delay: -0.216s;
}
.lds-roller div:nth-child(6):after {
  top: 54px;
  left: 19px;
}
.lds-roller div:nth-child(7) {
  animation-delay: -0.252s;
}
.lds-roller div:nth-child(7):after {
  top: 50px;
  left: 14px;
}
.lds-roller div:nth-child(8) {
  animation-delay: -0.288s;
}
.lds-roller div:nth-child(8):after {
  top: 45px;
  left: 10px;
}
@@keyframes lds-roller {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

    </style>
</head>
<body class="padTop53 ">
	<div id="wrap">
		<div id="top">
			<nav class="navbar navbar-inverse navbar-fixed-top " style="padding-top: 10px;">
				<a data-original-title="Show/Hide Menu" data-placement="bottom" data-tooltip="tooltip" class="accordion-toggle btn btn-primary btn-sm visible-xs" data-toggle="collapse" href="#menu" id="menu-toggle">
					<i class="icon-align-justify"></i>
				</a>
				<header class="navbar-header">
					<a onclick="location.href='@Url.Action("Index", "Planiranje")'" class="navbar-brand pointer">
						<img src="~/assets/img/logo.png" alt="" />
					</a>
				</header>
                <div class="col-lg-3" id="odabirSkole">@{Html.RenderAction("OdabirSkole", "Planiranje");}</div>
				<ul class="nav navbar-top-links navbar-right">
					<li class="dropdown">
						<a class="dropdown-toggle" data-toggle="dropdown" href="#">
							<i class="icon-user "></i>&nbsp; <i class="icon-chevron-down "></i>
						</a>
						<ul class="dropdown-menu dropdown-user">
							<li>
								<a class="pointer" onclick="showModal('@Url.Action("OsobniPodaci","Planiranje")')"><i class="icon-user"></i> Korisnički profil </a>
							</li>
							<li>
								<a href="#"><i class="icon-gear"></i> Osobne postavke </a>
							</li>
							<li class="divider"></li>
							<li>
								<a data-toggle="modal" data-target="#odjava" class="pointer"><i class="icon-signout"></i> Odjava </a>
							</li>
						</ul>
					</li>
				</ul>
			</nav>
			<div class="modal fade" id="odjava" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-body">
							<h4 class="modal-title" id="exampleModalLongTitle">Jeste li sigurni da se želite odjaviti?</h4>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-default" data-dismiss="modal">Odustani</button>
							<button onclick="location.href='@Url.Action("Prijava", "Planiranje")'" type="button" class="btn btn-danger">Odjavi</button>
						</div>
					</div>
				</div>
			</div>
		</div>
		@Html.Partial("../Shared/Navigation")
		<div id="content">
			@RenderBody()
		</div>
        <div id="loading" class="lds-roller"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>
		<div class="modal fade" id="modal" tabindex="-1" role="dialog" aria-labelledby="modal" aria-hidden="true" data-backdrop="static">
			<div id="modalContainer"></div>
		</div>
		<div id="snackbar"></div>
	</div>
	@Html.Partial("../Shared/Footer")
	<script src="~/assets/plugins/dataTables/jquery.dataTables.js"></script>
	<script src="~/assets/plugins/dataTables/dataTables.bootstrap.js"></script>
    <script src="~/Scripts/custom.js"></script>
    <script>
        function reloadPage(path) {
            $.ajax({
                url: path,
                success: function (data) {
                    if ($(data)[0].tagName === "DIV") {
                        $('#content').html(data);
                        if (!path.includes("Pomak")) {
                            window.history.replaceState(data, "Naslov", path);
                        }                        
                    } else {
                        location.reload();
                    }
                },
                error: function (xhr, ajaxOptions, thrownError) {
                    alert(xhr.responseText);
                }
            });
        }        
    </script>
    <script>
        function smoothscroll() {
            var currentScroll = document.documentElement.scrollTop || document.body.scrollTop;
            if (currentScroll > 0) {
                window.requestAnimationFrame(smoothscroll);
                window.scrollTo(0, currentScroll - (currentScroll / 5));
            }
        }
    </script>
    <script>
        function reload(path, id) {
            var dt = $(id).serialize();
            $.ajax({
                url: path,
                type: "POST",
                data: dt,
                success: function (data) {
                    if ($(data)[0].className === "inner") {
                        $("#content").html(data);
                        $('#modal').modal('hide');
                        $('#modalContainer').removeData();
                        $('.modal-backdrop').remove();                        
                    }
                    else {
                        $("#modalContainer").html(data);                        
                    }
                },
                error: function (request, status, error) {
                    console.log(request.responseText);
                }
            });
        }
        function hideModalOnly(path, id, poruka) {
            var dt = $(id).serialize();
            $.ajax({
                url: path,
                type: "POST",
                data: dt,
                success: function (data, textStatus, xhr) {
                    console.log(xhr.status);
                    if (xhr.status==200 && $(data)[0].className === "modal-dialog") {
                        $("#modalContainer").html(data);                        
                    }
                    else {
                        $('#modal').modal('hide');
                        $('#modalContainer').removeData();
                        $('.modal-backdrop').remove();
                        showSnackBar(poruka);                        
                    }                    
                },
                error: function (request, status, error) {
                    showSnackBar(error);
                }
            });
        }
        
    </script>
    <script>
        var element = $("#loading").hide();
        $(document)
            .ajaxStart(function () {
                element.show();                
            })
            .ajaxStop(function () {
                element.hide();
                smoothscroll();
            });
    </script>    
    <script>
        function promjenaSkole() {
            $.ajax({
                url: '/Planiranje/PromjenaSkole/' + $("#selectSkola").val(),
                type: "POST",
                success: function (data) {                    
                    showSnackBar("Škola promijenjena");
                    location.reload();
                },
                error: function (request, status, error) {
                    showSnackBar("Greška s promjenom škole");
                }
            });
        }
        function upload(path, id, poruka) {
            var forma = document.getElementById(id);
            $.ajax({
                type: 'POST',
                url: path,
                enctype: 'multipart/form-data',
                data: new FormData(forma),
                processData: false,
                contentType: false,
                success: function (data) {
                    if ($(data)[0].className === "inner") {
                        $("#content").html(data);
                        $('#modal').modal('hide');
                        $('#modalContainer').removeData();
                        $('.modal-backdrop').remove();
                        showSnackBar(poruka);
                    }
                    else {
                        $("#modalContainer").html(data);
                    }
                },
                error: function (request, status, error) {
                    showSnackBar("Dogodila se greška: " + error);
                }
            }
            );
        }    
    </script>
</body>
</html>

